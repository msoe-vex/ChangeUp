name: ROS Noetic Build CI
on: [push, pull_request]
jobs:
  build:
    name: ROS Build
    runs-on: ubuntu-20.04
    container: ros:noetic-ros-base-focal
    steps:
    - name: Checkout Repository
      uses: actions/checkout@v2
    - name: Install catkin
      run: cd / && $GITHUB_WORKSPACE/scripts/actions-entrypoint.sh
    - name: Setup catkin workspace
      run: |
        mkdir -p ~/ros-project/src
        cd ~/ros-project
        /bin/bash -c "source /opt/ros/noetic/setup.bash && catkin_make"
    - name: Build project
      run: |
        cd ~/ros-project/src 
        cp -r $GITHUB_WORKSPACE .
        /bin/bash -c "source ../devel/setup.bash && catkin_make"
